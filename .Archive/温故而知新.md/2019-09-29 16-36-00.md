#温故而知新
~~可以为师矣~~

## Vue
vue是渐进式框架，和react框架的
相同之处:
* 都是虚拟dom
* 提供了响应式和组件化的视图组件
* 注意力集中在主核心框架，其他功能都交给相关的库

不同的地方:
react一切都是jsx语法，dom、js、甚至css都是，反正我是接受不了
vue的思想是拥抱基础的web，在基础上做了修改

### 回调钩子
* beforeCreate，实例初始化之前
* created，实例初始化之后，还没挂载
* beforeMount，el挂载之前
* mounted，el已经挂载了
* beforeUpdate，数据更新之前
* update，数据已经更新了

### 脚手架
脚手架的区别
vue的脚手架 比较灵活
* 创建的时候可以自定义配置
* 本地创建的项目可以被配置
* 提供各种用途模版
以上这些都是react没有的，当然我也是觉得 还是看自己业务需求。

### 常用
* vue的方法 绑定数据
```
new Vue({
    data: {
        a: 'xxx'
    }    
 });
 // 在组件内
 {
     data() {
         return  {
             
         }
     }
 }
```
* 方法绑定
```
methods: {
    add: () => {
    }
}
```
* 组件
```
可以定义局部 或者 全局的组件
Vue.component(xxx)
不过一般都是直接引入组件文件
```
* `v-model`
```
// 拆开来看 其实等于
<input :value="test" @input="test = $event.target.value">

// 组件使用 
<v-test v-model="test"> </v-test>
// 组件内使用
{
    props: {
        [value] 
    }
}
<input :value="value" @input="$emit('input', $event.target.value)">
```

## 前端性能优化
* 减少HTTP请求，合理设置HTTP缓存
    每次http请求都非常昂贵，减少http请求可有效提高性能
    可以合并css, javascript, 合成雪碧图
* 浏览器缓存。通过设置http头部属性cache-control和expires
* 启用压缩，现在的webpack都是能一条龙完成了 压缩js html css
* 如果多图片可以做一个懒加载，页面只加载第一屏的页面
* js、css的加载，css写在最上面加载，让css先完成呈现，在加载js，js还可以根据需求进行异步加载
* 尽量减少cookie的传输，尽量不要用cookie传数据
* js的编写方法，
    - 减少作用域链查找，说明白点直接查找局部最快的，如果要使用全局的变量，可以缓存一下
    - 可能性的减少对象和数组的深度查找
    - 字符串的拼接，尽量不要用+，可以用最新的es6写法 `` 也可以使用数组的join方法
* 关于css选择符优化，css选择符是从右往左解析的，尽量使用class类标签来定义
* 使用CDN加速
* 反向代理
* 减少iframe的标签

## web常用安全漏洞

 先了解TCP的三次握手
请求连接，授予连接，确认连接

![](./_image/a2a7803323407c221860f062cc9ee58.png)


### DOC攻击
可以很容易被doc攻击
攻击者可以在 确认连接之前 伪造ACK数据包，发生大量半连接请求，所以导致服务器端没收到客户端请求的时候会重发请求包一直到链接超时，在配合ip的隐藏，SYN攻击会在短时间伪造大量不存在的ip，向服务器一直请求，导致不断重发到延迟，会引起网络严重堵塞

然后ack数据包在请求到服务器的时候，重新请求后有一段时间会放弃 这个时间叫SYN timout
防范办法:
* 缩短SYN timout的时间，及时超时就丢弃请求，释放更多资源
* 限制同时打开SYN的数目，关闭不必要服务
* 设置SYN cookie 给每一个请求连接的ip都分配一个cookie，如果一个ip重复的SYN报文，就可以确定是攻击，然后抛弃这个包

### DDOC攻击
ddoc攻击是doc攻击的一种，更加具有破坏性，操作多台傀儡电脑进行攻击
防范办法:
* 反欺骗：对数据包的地址及端口的正确性进行验证，同时进行反向探测。
* 协议栈行为模式分析：每个数据包类型需要符合RFC规定，这就好像每个数据包都要有完整规范的着装，只要不符合规范，就自动识别并将其过滤掉。
*  特定应用防护：非法流量总是有一些特定特征的，这就好比即便你混进了顾客群中，但你的行为还是会暴露出你的动机，比如老重复问店员同一个问题，老做同样的动作，这样你仍然还是会被发现的。
* 带宽控制：真实的访问数据过大时，可以限制其最大输出的流量，以减少下游网络系统的压力。 


### XSS攻击
跨站脚本攻击，就是在web页面注入恶意的js代码，当用户浏览这些网页时，就会执行其中的恶意代码，可对用户进行盗取cookie信息、会话劫持等各种攻击。
是常见web攻击技术手段之一。
防范方法:
* 所有输入内容都做过滤。就是验证。
* 服务器端获取到数据后，可以转一下编码。也可以在发送的时候转一下编码(base64之类的)
* HttpOnly Cookie，Web应用程序在设置cookie时，将其属性设为HttpOnly，就可以避免该网页的cookie被客户端恶意JavaScript窃取，保护用户cookie信息
* WAF(Web Application Firewall)，Web应用防火墙 直接用第三方的工具

### 什么是Data UrI
Data URI是由RFC 2397定义得一种把小文件直接嵌入文档的方案
语法:
`data:[<mediatype>][;base64],<data>`
* data: 协议头，它标识这个内容为一个data URI资源
* mediatype: MIME类型字符串, 默认`text/plain`则以文本类型展示，`image/jpeg`,以jpeg图片形式展示,同样，客户端也是以这个MIME类型解析
* base64: 编码设定
* 最后一个就是 内容了，如果标注了base64，必须是base64得编码内容

#### Data URI有什么好?
最大得好处就是:
* 减少HTTF请求
* 避免图片清理缓存得问题
* 服务器端程序动态生成，可以显示不同的图片

我们知道相比于正常的图片的加载，url写在一个img的src里面，向服务器请求，客户端解析，这样的每一次请求http 。
Data URI就是直接把内容内嵌到html的代码里面，在客户端直接解析
但是问题来了，data URI没办法缓存啊
所以我们都会把 Data URI写在css的背景图里面。浏览器不管你css的URL写的什么，反正只需要通过它获取到数据就可以了
而所有浏览器都会很积极缓存css文件来提升页面的效率

![](./_image/2019-09-29-16-25-20.jpg)
这就是我们经常看到一大堆的代码

#### Data URI很好吗？
不是是，要看情况使用
* base64编码，数据体积是原数据的的体积的4/3 ，也就是Data URI的图片会比原来的图片打1/3(服务器端有gzip压缩，压缩后差不多)
* Data URI的图片不会被浏览器缓存，意味着每一次访问都要重新下载，还好有css(上面提到了)
* 兼容性，最头大的来了 IE678的兼容
* 不利于维护
* **移动端也非常不合适**

为什么最后一条要加粗，因为最直接就是 解码耗 CPU
mobify最新的测试数据: `手机端DataURI要比简单的外链资源慢6倍`

所以啊，什么时候